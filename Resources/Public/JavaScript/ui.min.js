!function(){function e(){o(),window.addEventListener("online",o),window.addEventListener("offline",o)}function t(e,t){var o=document.createElement("script");o.type="text/javascript",o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t())}:o.onload=function(){t()},o.src=e,document.getElementsByTagName("head")[0].appendChild(o)}function o(){"onLine"in navigator&&(navigator.onLine?(d=!0,document.body.classList.add("online"),document.body.classList.remove("offline")):(d=!1,document.body.classList.add("offline"),document.body.classList.remove("online")))}function n(e,o){e&&e.length&&(i.wordpress||(i.wordpress=$('<div class="list posts wordpress"></div>'),$("body").append(i.wordpress)),i.wordpress.empty(),t("/vendor/api/date.format.js",function(){var t=$('<ul class="post-holder">');$.each(e,function(){var e=this,o=dateFormat(e.date,"dS mmmm yyyy, H:MM");t.append('<li class="post post-'+e.id+'"><header><h2 class="post-title"><a rel="bookmark" href="'+e.link+'">'+e.title.rendered+"</a><time>"+o+"</time></h2></header>"+e.excerpt.rendered+'<p><a rel="bookmark" href="'+e.link+'">Read this blog post</a></p></li>')}),c.addClass("open"),i.wordpress.append(r("Close",i.wordpress)).append(t).addClass("open"),$("a",t).attr("target","_blank"),i.wordpress.on("closeme",function(){$(this).removeClass("open"),c.removeClass("open")}),a(e,o)}))}function a(e,t){"localStorage"in window&&(e=JSON.stringify(e),window.localStorage.setItem(t,e))}function s(e){if("localStorage"in window){var t=window.localStorage.getItem(e);if(t)return JSON.parse(t)}return!1}function r(e,t){var o=$('<div class="button-holder"></div>'),n=$('<button class="button button-primary"></button>');return o.append(n),n.text(e),n.on("click.close",function(e){$(t).trigger("closeme",e)}),o}var d=!0,i=[],l="https://permanenttourist.ch/wp-json/wp/v2/posts",c;e(),d&&t("https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js",function(){c=$('<div class="page-overlay"></div>'),$("body").append(c),$("[data-postsbytag]").on("click.loadme",function(e){e.preventDefault();var t=$(this).data("postsbytag"),o=s(t);o?n(o,t):$.ajax({url:l,type:"jsonp",method:"get",data:{filter:{tag:t}},success:function(e){n(e,t)}})})})}();